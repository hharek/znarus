<?php
/**
 * Отображить <tr> с подчинёнными страницами (рекурсия)
 */
function page_html($page, $url, $level)
{
?>

	<?php foreach ($page as $val): ?>
		<tr>
			<td url="#page/edit?id=<?php echo $val['ID']; ?>" style="text-align: left; padding-left: <?php echo 12 + ($level * 22); ?>px;">
				<?php echo $val['Name']; ?>
			</td>
			<td url="#page/edit?id=<?php echo $val['ID']; ?>" style="text-align: left; padding-left: 10px;">
				<?php echo $url . $val['Url']; ?>
			</td>
			<td>
				<a target="_blank" href="<?php echo $url . $val['Url']; ?>" class="icon_view"></a>
			</td>
		</tr>
		
		<?php page_html($val['Child'], $url . $val['Url'] . "/", $level + 1);	?>
		
	<?php endforeach; ?>
	
<?php
}
?>

<table class="std_list" align="center" style="width: 800px;">
	<col width="45%"/>
	<col width="45%"/>
	<col width="10%"/>
	<thead>
		<tr>
			<td>Наименование</td>
			<td>Урл</td>
			<td>Просм.</td>
		</tr>
	</thead>
	<tbody>
		<?php page_html($page, "/", 0); ?>
	</tbody>
</table>
<br/>
<center>
	<a href="#page/add" class="std_button">
		<div class="icon_add"></div>
		Добавить
	</a>
</center>

